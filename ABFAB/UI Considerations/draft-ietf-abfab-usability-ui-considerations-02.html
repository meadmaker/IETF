<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Application Bridging for Federated Access Beyond web (ABFAB) Usability and User Interface Considerations</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions">
<link href="#rfc.section.3" rel="Chapter" title="3 Terminology">
<link href="#rfc.section.4" rel="Chapter" title="4 Context">
<link href="#rfc.section.5" rel="Chapter" title="5 Considerations around Terminology">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Identity">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Services">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Identity to Service Mapping">
<link href="#rfc.section.6" rel="Chapter" title="6 Considerations around Management of Identities">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Information associated with each Identity">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Storage of Identity Information">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Adding/Association of an Identity">
<link href="#rfc.section.6.3.1" rel="Chapter" title="6.3.1 Manual Addition">
<link href="#rfc.section.6.3.2" rel="Chapter" title="6.3.2 Manually Triggered Automated Addition">
<link href="#rfc.section.6.3.3" rel="Chapter" title="6.3.3 Fully Automated Addition">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 Modifying Identity Information">
<link href="#rfc.section.6.4.1" rel="Chapter" title="6.4.1 Manual Modification">
<link href="#rfc.section.6.4.2" rel="Chapter" title="6.4.2 Automated Modification">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 Verifying an identity">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 Removing an Identity">
<link href="#rfc.section.6.6.1" rel="Chapter" title="6.6.1 Manual Removal">
<link href="#rfc.section.6.6.2" rel="Chapter" title="6.6.2 Automated Removal">
<link href="#rfc.section.6.7" rel="Chapter" title="6.7 Storing an Identity with or without credentials">
<link href="#rfc.section.7" rel="Chapter" title="7 Considerations around Management of Service to Identity Mappings">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Associating a Service with an Identity">
<link href="#rfc.section.7.1.1" rel="Chapter" title="7.1.1 User-driven Manual Association">
<link href="#rfc.section.7.1.2" rel="Chapter" title="7.1.2 Automated Rules-based Association">
<link href="#rfc.section.7.1.3" rel="Chapter" title="7.1.3 Association Conflicts">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Disassociating a Service with an Identity">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Listing Services and Identities">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 Showing the Service that is requesting Authentication">
<link href="#rfc.section.7.5" rel="Chapter" title="7.5 Showing the Identity currently in use">
<link href="#rfc.section.7.6" rel="Chapter" title="7.6 Multiple Identities for a Particular Service">
<link href="#rfc.section.7.7" rel="Chapter" title="7.7 Not using ABFAB for a Particular Service">
<link href="#rfc.section.8" rel="Chapter" title="8 Handling of Errors">
<link href="#rfc.section.9" rel="Chapter" title="9 Handling of Successes">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Reporting Authentication Success on First Use of Identity">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Reporting Authentication Success">
<link href="#rfc.section.10" rel="Chapter" title="10 Other Considerations">
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Identity Selector Taking Focus">
<link href="#rfc.section.10.2" rel="Chapter" title="10.2 Import/Export of Credentials">
<link href="#rfc.section.11" rel="Chapter" title="11 Security Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 IANA Considerations">
<link href="#rfc.section.13" rel="Chapter" title="13 Contributors">
<link href="#rfc.section.14" rel="Chapter" title="14 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="15 References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Change Log">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Open Issues">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The real world use of ABFAB-based technologies requires that any identity that is to be used for authentication has to be configured on the ABFAB-enabled client device. Achieving this requires software on that device (either built into the operating system or a standalone utility) that will interact with the user, managing their identity information and identity-to-service mappings. All designers of software to fulfil this role will face the same set of challenges. This document aims to document these challenges with the aim of producing well-thought out UIs with some degree of consistency between implementations.  " />
  <meta name="description" content="The real world use of ABFAB-based technologies requires that any identity that is to be used for authentication has to be configured on the ABFAB-enabled client device. Achieving this requires software on that device (either built into the operating system or a standalone utility) that will interact with the user, managing their identity information and identity-to-service mappings. All designers of software to fulfil this role will face the same set of challenges. This document aims to document these challenges with the aim of producing well-thought out UIs with some degree of consistency between implementations.  " />
  <meta name="keywords" content="Internet-Draft, Federated Authentication, AAA, RADIUS, Diameter, GSS-API, EAP, SASL, ABFAB, UI, Usability" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ABFAB</td>
<td class="right">R. Smith</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cardiff University</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">M. Donnelly</td>
</tr>
<tr>
<td class="left">Expires: April 12, 2016</td>
<td class="right">Painless Security</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 12, 2015</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Application Bridging for Federated Access Beyond web (ABFAB) Usability and User Interface Considerations<br />
  <span class="filename">draft-ietf-abfab-usability-ui-considerations-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The real world use of ABFAB-based technologies requires that any identity that is to be used for authentication has to be configured on the ABFAB-enabled client device. Achieving this requires software on that device (either built into the operating system or a standalone utility) that will interact with the user, managing their identity information and identity-to-service mappings. All designers of software to fulfil this role will face the same set of challenges. This document aims to document these challenges with the aim of producing well-thought out UIs with some degree of consistency between implementations.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 12, 2016.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2015 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions</a>
</li>
<li>3.   <a href="#rfc.section.3">Terminology</a>
</li>
<li>4.   <a href="#rfc.section.4">Context</a>
</li>
<li>5.   <a href="#rfc.section.5">Considerations around Terminology</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Identity</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Services</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Identity to Service Mapping</a>
</li>
<li>6.   <a href="#rfc.section.6">Considerations around Management of Identities</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Information associated with each Identity</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Storage of Identity Information</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Adding/Association of an Identity</a>
</li>
<li>6.3.1.   <a href="#rfc.section.6.3.1">Manual Addition</a>
</li>
<li>6.3.2.   <a href="#rfc.section.6.3.2">Manually Triggered Automated Addition</a>
</li>
<li>6.3.3.   <a href="#rfc.section.6.3.3">Fully Automated Addition</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">Modifying Identity Information</a>
</li>
<li>6.4.1.   <a href="#rfc.section.6.4.1">Manual Modification</a>
</li>
<li>6.4.2.   <a href="#rfc.section.6.4.2">Automated Modification</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">Verifying an identity</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">Removing an Identity</a>
</li>
<li>6.6.1.   <a href="#rfc.section.6.6.1">Manual Removal</a>
</li>
<li>6.6.2.   <a href="#rfc.section.6.6.2">Automated Removal</a>
</li>
<li>6.7.   <a href="#rfc.section.6.7">Storing an Identity with or without credentials</a>
</li>
<li>7.   <a href="#rfc.section.7">Considerations around Management of Service to Identity Mappings</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Associating a Service with an Identity</a>
</li>
<li>7.1.1.   <a href="#rfc.section.7.1.1">User-driven Manual Association</a>
</li>
<li>7.1.2.   <a href="#rfc.section.7.1.2">Automated Rules-based Association</a>
</li>
<li>7.1.3.   <a href="#rfc.section.7.1.3">Association Conflicts</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Disassociating a Service with an Identity</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Listing Services and Identities</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">Showing the Service that is requesting Authentication</a>
</li>
<li>7.5.   <a href="#rfc.section.7.5">Showing the Identity currently in use</a>
</li>
<li>7.6.   <a href="#rfc.section.7.6">Multiple Identities for a Particular Service</a>
</li>
<li>7.7.   <a href="#rfc.section.7.7">Not using ABFAB for a Particular Service</a>
</li>
<li>8.   <a href="#rfc.section.8">Handling of Errors</a>
</li>
<li>9.   <a href="#rfc.section.9">Handling of Successes</a>
</li>
<li>9.1.   <a href="#rfc.section.9.1">Reporting Authentication Success on First Use of Identity</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">Reporting Authentication Success</a>
</li>
<li>10.   <a href="#rfc.section.10">Other Considerations</a>
</li>
<li>10.1.   <a href="#rfc.section.10.1">Identity Selector Taking Focus</a>
</li>
<li>10.2.   <a href="#rfc.section.10.2">Import/Export of Credentials</a>
</li>
<li>11.   <a href="#rfc.section.11">Security Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">IANA Considerations</a>
</li>
<li>13.   <a href="#rfc.section.13">Contributors</a>
</li>
<li>14.   <a href="#rfc.section.14">Acknowledgements</a>
</li>
<li>15.   <a href="#rfc.references">References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Change Log</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Open Issues</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The use of ABFAB-based technologies requires that any identity that is to be used for authentication has to be configured on the client device. Achieving this requires software on that device (either built into the operating system or a standalone utility) that will interact with the user, and manage the user's identities and credential-to-service mappings. Anyone designing that software will face the same set of challenges.  </p>
<p id="rfc.section.1.p.2">This document does not intend to supplant evidence-based UI design guidelines; implementers of identity selectors are strongly encouraged to understand the latest in HCI and UX thought and practice. Instead, it aims to document the common challenges faced by implementers with the aim of providing a common starting point for implementers in the hope that this aids in producing well-thought out UIs with some degree of consistency.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Conventions</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Terminology</h1>
<p id="rfc.section.3.p.1">Various items of terminology used in the document are heavily overloaded in that they mean a variety of different things to different people. In an attempt to minimise this problem, this section gives a brief description of the main items of terminology used in order to aid a consistent understanding of this document.  </p>

<ul>
<li>NAI: Network Access Identifier - a standard way of identifying a user and assisting in the routing of an authentication request (see <a href="#RFC4282">[RFC4282]</a>).  </li>
<li>Identity: In this context, an identity is a credential given to a user by a particular organisation with which they have an association. A user may have multiple identities - potentially multiple identities per organisation, and also across multiple organisations. Each identity will consist of an NAI, alongside other information that supports authentication. Note that in other contexts the usual use of "identity" would match our use of "user", whereas the usual use of "identifier" matches our use of identity.  </li>
<li>Service: The thing that the user is attempting to authenticate to via ABFAB technology. See <a href="#I-D.ietf-abfab-usecases">[I-D.ietf-abfab-usecases]</a> for some example ABFAB use cases. Also known as the Relying Party.  </li>
<li>Identity Selector: A piece of software that enables the process by which the GSS-API acquires the identity to use with a particular service. An Identity Selector typically would allow the user to configure a set of identities along with service to identity mappings.  </li>
<li>Trust anchor: An authoritative source of verification of a particular ABFAB service or Identity Provider, used to allow authentication of a server using X.509 <a href="#RFC5280">[RFC5280]</a>. Within the context of the UI, this refers to the Identity Provider instead of the ABFAB service. Typically this will be a commercial CA to allow authentication via chain of trust, or a preconfigured non-commercial certificate (e.g. self-signed).  </li>
</ul>

<p> </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Context</h1>
<p id="rfc.section.4.p.1">When using the ABFAB architecture (see <a href="#I-D.ietf-abfab-arch">[I-D.ietf-abfab-arch]</a>) to perform federated authentication to some service, a user will need to provide identity information that they wish to use to authenticate to that particular service. This will happen through a process of the application calling the GSS-API, which will in turn gather the user's credentials through some process. We will call this process the "identity selector" in this document (though note that this is not a recommendation on terminology for the process).  </p>
<p id="rfc.section.4.p.2">The simplest way to achieve the desired effect would be a process that simply takes the credentials from the currently logged in user (e.g. the Windows Domain Credentials) and uses those for all services that request authenticate through ABFAB. This approach gives ultimate simplicity in terms of UI (it wouldn't have one) but the least flexibility (the user has to use a single identity for everything). If there is ever to be a requirement for a user to use a different set of credentials for a service, then something more complex will be needed.  </p>
<p id="rfc.section.4.p.3">Where there is a requirement for multiple credentials to be supported, there are at least two methods that could be employed to configure identities and associated information: </p>

<ul>
<li>They could be configured manually by the user in a configuration file that could be edited by hand or some such simple process, and read by the GSS-API mechanism. While this could work very well functionally, in practice only a small subset of users would be happy with - and able to - configure their identities in such a manner.  </li>
<li>They could be configured through some interactive process. For ease of use this should have a simple UI, although to support some use cases a headless mode (i.e. a way of interacting with the identity selector when there is no GUI present) may need to be supported.  </li>
</ul>

<p> </p>
<p id="rfc.section.4.p.4">When designing an identity selector with a UI (or indeed, with a headless mode), any implementer will share a common set of usability considerations inherent to the context. This document aims to explore these considerations, and provide advice and guidance on addressing them where possible.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Considerations around Terminology</h1>
<p id="rfc.section.5.p.1">Anyone designing an identity selector will have to grapple with choosing terminology that the average user has some chance of understanding. This terminology can split into a few main functional areas, as discussed next.  </p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Identity</h1>
<p id="rfc.section.5.1.p.1">The first area where terminology is needed is around the identity/identities of the user. Users are typically used to seeing a variety of terms for aspects of their identity in the federated sense, and an even larger variety in the wider Internet sense. For example, in the federated sense some of these terms include "username", "login", "network account", "institutional account", "home organisation account", "credentials", and a myriad of other such terms. However, NAI - the technically correct name for their identity in an ABFAB sense - is highly unlikely to be one of these terms that users are used to seeing. Further, given that the NAI superficially looks like an email address, there is a definite potential for confusion.  </p>
<p id="rfc.section.5.1.p.2">Implementers of an identity selector will need to carefully consider their intended audience for both their level of technical capability and the existing terminology that they may have been exposed to.  </p>
<p id="rfc.section.5.1.p.3">Beyond terminology, careful thought needs to be given to the paradigm to use when presenting identity to users, as identities and services are abstract concepts that some users may not find is easily understandable. Implementers may wish to keep such abstract concepts, or may wish to examine attempts to map to real world paradigms, e.g. the idea of using "Identity Cards" that are held in the user's "Wallet", as used by Microsoft Cardspace.  </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Services</h1>
<p id="rfc.section.5.2.p.1">Terminology around services is likely to be less of a problem than identity, but it will actually depend on what the service is. For example, each service could be simply described as "server", "system", etc. But for simplicity just the word "service" will probably usually suffice.  </p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Identity to Service Mapping</h1>
<p id="rfc.section.5.3.p.1">Depending on your perspective either each identity may be mapped to multiple services, or each service has multiple identities mapped to it. Thus any UI could present either perspective, or both.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Considerations around Management of Identities</h1>
<p id="rfc.section.6.p.1">One of the core features of an identity selector is the management of a user's identities. This section first looks at what information associated with an identity will need to manage, and then looks in detail at various usability considerations of this area.  </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#Identity_Information" id="Identity_Information">Information associated with each Identity</a>
</h1>
<p id="rfc.section.6.1.p.1">The bare minimum set of information that MUST be stored about each identity to allow ABFAB authentication to take place is a single item: </p>

<ul><li>NAI: The user's Network Access Identifier (see <a href="#RFC4282">[RFC4282]</a>) for this particular credential. For example, "joe@example.com". Note that the identity selector MUST NOT store different identities that use the same NAI. This is required as the NAI is the unique key that is used by the identity selector when interacting with the GSS-API mechanism for various reasons, for example, to allow the GSS-API mechanism to report back error or success statuses or to allow the application to request the use of a specific identity.  </li></ul>

<p> </p>
<p id="rfc.section.6.1.p.2">Next up is a small set of information that SHOULD be stored about each identity to allow the user to effectively select a particular identity: </p>

<ul>
<li>Trust anchor: For the identity selector to be able to verify that the Identity Provider it is going to talk to and attempt to authenticate against is the Identity Provider that it is expecting, and that it is not being spoofed in some way. This is likely to be an X.509 certificate <a href="#RFC5280">[RFC5280]</a>, or a tuple of (trusted root certificate, servername in Subject or subjectAltName). Storing a credential without a relevant trust anchor allows for the possibility of a malicious attacker intercepting traffic and masquerading as the Identity Provider in question.  </li>
<li>Credential: Whatever is used by the users to authenticate themselves with a particular NAI. What exactly this will be will be dependent on the EAP method being used, but is likely to be something like a password or a certificate. Note that this is a SHOULD, rather than a MUST, because there are use cases where a user may specifically opt for this not to be "remembered".  </li>
</ul>

<p> </p>
<p id="rfc.section.6.1.p.3">Finally, there is a set of optional information that MAY be stored about each identity that represent useful information for the user to have and could make an identity selector more usable. Note that this list is neither intended to be exhaustive or even particularly correct; any implementer is free to use whatever make sense in their implementation and conforms to good HCI/UX guidelines. Instead, it is simply a suggested starting point.  </p>

<ul>
<li>Friendly name for identity: To allow the user to differentiate between the set of identities represented in the Identity Selector. This should be editable by the user. The only restriction on this name is that it MUST be unique within that particular user's set of identities. For example: "My University", "Google Account", "Work Login", etc.  </li>
<li>Friendly icon for identity: To allow the user to differentiate between the set of identities they have they should be able to set an icon for that particular identity.  </li>
<li>Password changing URL: The URL the user should visit should they need to change their password for this particular identity. For example, "http://www.example.com/passwordreset".  </li>
<li>Helpdesk URL: The URL the user should visit to get contact details for the helpdesk of the organisation that issued this particular identity for when the user encounters issues and needs help. For example, https://www.example.com/helpdesk.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#Storing_Identity_Information" id="Storing_Identity_Information">Storage of Identity Information</a>
</h1>
<p id="rfc.section.6.2.p.1">Since some of the information that makes up the identity is sensitive in nature (e.g. containing passwords), then this information SHOULD be stored and accessed securely. This might involve ensuring the credential information is held in encrypted form on device and accessed using a passphrase. For deeper integration into the system, this could be done by using existing secure storage on the system such as Keychain on a Mac or the GNOME keyring on a GNOME based Linux device.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#Identity_Addition" id="Identity_Addition">Adding/Association of an Identity</a>
</h1>
<p id="rfc.section.6.3.p.1">Users will have one or more identities given to them by organisations that they have a relationship with. One of the core tasks of an identity selector will be to learn about these identities in order to use them when it comes to authenticating to services on behalf of the user. Adding these identities could be done in one of three ways: manual addition, automated addition that is manually triggered, or automated addition that is automatically triggered. Each of these are discussed in more detail next.  </p>
<p id="rfc.section.6.3.p.2">Note that the term "association" or "addition" of an identity is used rather than "provisioning" of an identity, because while we actually are provisioning identities into the UI, provisioning is an overloaded term in the identity and access management space and could easily be confused with identity provisioning in the sense of the creation of the identity by the home organisation's identity management procedures.  </p>
<h1 id="rfc.section.6.3.1">
<a href="#rfc.section.6.3.1">6.3.1.</a> <a href="#Identity_Addition_Manual" id="Identity_Addition_Manual">Manual Addition</a>
</h1>
<p id="rfc.section.6.3.1.p.1">Allowing users to manually add an identity is technically the easiest method to get this information, but it is a method that has the greatest usability drawbacks - including some that create potential security issues. Most of the information required is relatively technical and finding some way of explaining what each field is to an non-technical audience is challenging (to say the least). This especially is the case for trust anchor information. Thus this method should be considered as a power-user option only, or as a fall-back should the other methods not be applicable. Implementers may well decide not to offer the manual option due to these drawbacks.  </p>
<p id="rfc.section.6.3.1.p.2">When this method is used, careful consideration should be given to the UI presented to the user. The UI will have to ask for all of the information detailed in <a href="#Identity_Information">Section 6.1</a>.  </p>
<p id="rfc.section.6.3.1.p.3">There are two points at which a user could manually add an identity: </p>

<ul>
<li>Asynchronously: the user could be allowed to, at any time, trigger a workflow of manually adding an identity. This represents the most flexible way of adding an identity since a user can perform this at any time. It does, however, also have inherent issues when it comes to verifying the newly added identity - see <a href="#Identity_Verification">Section 6.5</a>.  </li>
<li>Just In Time: when connecting to a service which has no mapping to an existing identity, the user could be given an option to add a new one, as well as associating with an existing one. This seems to present a better user experience when it comes to verifying the newly added identity (see <a href="#Identity_Verification">Section 6.5</a>), however, it represents a less direct method of adding an identity. Users who have not yet added the appropriate identity to their identity selector may find it difficult to understand that they must try to access a particular service in order to add an identity.  </li>
</ul>

<p> </p>
<p id="rfc.section.6.3.1.p.4">Of course, implementers could support both styles of identity addition to gain the benefits of both and give flexibility to the user.  </p>
<p id="rfc.section.6.3.1.p.5">Finally, the area of verification of trust anchors is very important. An Identity Selector that allows for manual addition of identity information SHOULD try to ensure that trust anchor information is gathered and checked in a secure a manner as possible - where users have to enter and confirm all trust anchor information, or be required to explicitly agree to an insecure configuration if this is not done properly.  </p>
<h1 id="rfc.section.6.3.2">
<a href="#rfc.section.6.3.2">6.3.2.</a> <a href="#Identity_Addition_Automated_Manually_Triggered" id="Identity_Addition_Automated_Manually_Triggered">Manually Triggered Automated Addition</a>
</h1>
<p id="rfc.section.6.3.2.p.1">One way to bypass the need for manual addition of a user's identity - and all of the usability and security issues inherent with that approach - is to provide some sort of manually triggered, but automated, addition process.  </p>
<p id="rfc.section.6.3.2.p.2">One approach to accomplishing this, for example, could be for an organisation to have a section on their website where their users could visit, enter the user part of their NAI, and be given piece of data that contains much or all of the relevant identity information for importing into the identity selector.  </p>
<p id="rfc.section.6.3.2.p.3">It is reasonable to assume that any such automated addition service is likely to be organisation specific, so that the Issuing Organisation and realm part of the NAI will be constant, as would be the trust anchor information. The user part of their NAI will have been input on the web service. The password could be provided as a part of the provided data or the identity selector could prompt the user to enter it.  </p>
<p id="rfc.section.6.3.2.p.4">Additionally, the user SHOULD be given the opportunity to: </p>

<ul>
<li>Supply or change the default friendly name for that identity - to allow the user to customise the identifier they use for that identity; </li>
<li>Indicate whether or not the identity selector should always ask before using services with this identity - to customise the way in which the identity selector interacts with the user with this particular identity; </li>
<li>Reject the addition of the identity completely - to allow the user to back out of the association process in an intuitive way.  </li>
</ul>

<p> </p>
<p id="rfc.section.6.3.2.p.5">In this case, trust anchors could be directly provided through the automated addition process to help establish the trust relationship in a secure manner.  </p>
<h1 id="rfc.section.6.3.3">
<a href="#rfc.section.6.3.3">6.3.3.</a> <a href="#Identity_Addition_Automated" id="Identity_Addition_Automated">Fully Automated Addition</a>
</h1>
<p id="rfc.section.6.3.3.p.1">Many organisations manage the machines of their users using enterprise management tools. Such organisations may wish to be able to automatically add a particular user's identity to the identity selector on their machine/network account so that the user has to do nothing.  </p>
<p id="rfc.section.6.3.3.p.2">This represents the best usability for the user - who wouldn't actually have to do anything. However, it can only work on machines centrally managed by the organisation.  </p>
<p id="rfc.section.6.3.3.p.3">Additionally, having an identity automatically provided, including its password, does have some particular usability issues. Users are used to having to provide their username and password to access remote services. When attempting to access services, authenticating to them completely transparently to the user could represent a source of confusion. User training within an organisation to explain that automated population of their identity has been enabled is the only way to counter this.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> Modifying Identity Information</h1>
<p id="rfc.section.6.4.p.1">This process is conceptually fairly similar to adding an identity, and thus shares many of the usability issues with that process. Some particular things are discussed here.  </p>
<h1 id="rfc.section.6.4.1">
<a href="#rfc.section.6.4.1">6.4.1.</a> Manual Modification</h1>
<p id="rfc.section.6.4.1.p.1">An identity selector may allow a user to manually modify some or all of the information associated with each identity. The obvious item that SHOULD be allowed to be changed by the user is the password associated with the identity.  </p>
<h1 id="rfc.section.6.4.2">
<a href="#rfc.section.6.4.2">6.4.2.</a> Automated Modification</h1>
<p id="rfc.section.6.4.2.p.1">To ease usability, organisations may wish to automatically provide updates to identity information. For example, if the user's password changes it could automatically update the password for the identity in the user's identity selector, or if the trust anchor information changes (e.g. if a certificate is changed) it could be automatically pushed out to all users.  </p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> <a href="#Identity_Verification" id="Identity_Verification">Verifying an identity</a>
</h1>
<p id="rfc.section.6.5.p.1">An inherent by-product of the ABFAB architecture is that an identity cannot be verified during the addition process; it can only be verified while it is in use with a real service. This represents a definite usability issue no matter which method of identity addition is used (see <a href="#Identity_Addition">Section 6.3</a>): </p>

<ul>
<li>If the user has manually added the identity (see <a href="#Identity_Addition">Section 6.3</a>) they may have gone through the whole manual process with no errors and so believe the identity has been set up correctly. However, when they attempt to access a service, they may be given an error message, thus causing some amount of confusion.  </li>
<li>If the user has had the identity populated into their identity selector, then there is a much greater chance of the identity information being correct. However, if any of the information is not correct, then there is the potential for confusion as the user did not add the information in the first place.  </li>
</ul>

<p> </p>
<p id="rfc.section.6.5.p.2">Also, if the identity information is incorrect the user may not know where the error lies, and the error messages provided by the process may not be helpful enough to indicate the error and how to fix it (see <a href="#Handling_Errors">Section 8</a>).  </p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> Removing an Identity</h1>
<p id="rfc.section.6.6.p.1">This is fairly similar to adding or modifying an identity, and thus shares many of the usability issues with those processes. Some particular things are discussed here.  </p>
<h1 id="rfc.section.6.6.1">
<a href="#rfc.section.6.6.1">6.6.1.</a> Manual Removal</h1>
<p id="rfc.section.6.6.1.p.1">Allowing the user to manually delete an identity is probably the best way to achieve the goal. Any UI should allow for this option.  </p>
<h1 id="rfc.section.6.6.2">
<a href="#rfc.section.6.6.2">6.6.2.</a> Automated Removal</h1>
<p id="rfc.section.6.6.2.p.1">While automated removal of an identity is a way of achieving the goal without having to interact with the user, the consequence is that things may disappear from the user's identity selector without them realising.  </p>
<h1 id="rfc.section.6.7">
<a href="#rfc.section.6.7">6.7.</a> Storing an Identity with or without credentials</h1>
<p id="rfc.section.6.7.p.1">Sometimes, a user may wish to have the identity they wish to use with a service stored by the identity selector, but not the credential (e.g. password) that goes along with that Identity. The consequence of this is that when a user attempts to authenticate to a service for which an identity, but no credential, is stored, then the user would need to be prompted to manually enter the credential.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Considerations around Management of Service to Identity Mappings</h1>
<p id="rfc.section.7.p.1">A service to identity mapping tells the identity selector which identity should be used for a particular service. There is potentially a many-to-many association between identities and services since a user may wish to use one of their identities for many services, or more than one identity for a single service (e.g. if they have multiple roles on that service).  </p>
<p id="rfc.section.7.p.2">This potentially complex many-to-many association between identities and services is not easily comprehended by the user, and allowing the user to both manipulate it and control can be challenging. These obstacles are especially common when errors occur after an association has been made. In this scenario it is important that an identity can be disassociated with a service.  </p>
<p id="rfc.section.7.p.3">To further complicate the picture, users may wish for: </p>

<ol>
<li>The identity to service mapping to be stored along with the credential, i.e. the user should always be authenticated to a particular service with a particular identity with no prompting.  </li>
<li>The identity to service mapping to be stored but not the credential, i.e. the user should not be prompted to choose the identity for a particular service, but should be prompted to enter their credential for that identity.  </li>
<li>The identity to service mapping to not be stored, i.e. the user should be asked which identity to use every time they authenticate to a particular service.  </li>
</ol>

<p> </p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Associating a Service with an Identity</h1>
<p id="rfc.section.7.1.p.1">There needs to be a way for the user to create the service to identity association. It is advisable that this link be made only after the identity in question has authenticated with the service without any error.  </p>
<p id="rfc.section.7.1.p.2">There are a few ways this association could happen.  </p>
<h1 id="rfc.section.7.1.1">
<a href="#rfc.section.7.1.1">7.1.1.</a> User-driven Manual Association</h1>
<p id="rfc.section.7.1.1.p.1">There are two ways in which manual association of an identity to a service could happen: </p>

<ol>
<li>The user could manually associate a particular service with a particular identity using the identity selector before they first attempt to use the service. In order to do so, however, the user would need to know all the required technical details of that service beforehand, such as its GSS Acceptor Name.  </li>
<li>On encountering a service new to the identity selector, the identity selector could pop up a dialogue box to the user asking if they would like to use an existing identity for this service (and might also allow them to create a new identity and use that).  </li>
</ol>

<p> </p>
<h1 id="rfc.section.7.1.2">
<a href="#rfc.section.7.1.2">7.1.2.</a> Automated Rules-based Association</h1>
<p id="rfc.section.7.1.2.p.1">It would be beneficial from a usability perspective to minimise - or avoid entirely  - situations where the user has to pick an identity for a particular service. This could be accomplished by having rules to describe services and their mapping to identities. Such a rule could match, for example, a particular identity for all IMAP servers, or a particular identity for all services in a given service realm. These rules could be configured as a part of the automated identity addition process described in <a href="#Identity_Addition_Automated_Manually_Triggered">Section 6.3.2</a> or <a href="#Identity_Addition_Automated">Section 6.3.3</a>.  </p>
<h1 id="rfc.section.7.1.3">
<a href="#rfc.section.7.1.3">7.1.3.</a> Association Conflicts</h1>
<p id="rfc.section.7.1.3.p.1">The presence of rules-based associations brings with it potential conflicts in the rules.  A non-exhaustive list of conflicts includes: </p>

<ul>
<li>One rule applies to all services of a particular type, while another rule applies to all services within a particular domain.  For example, one rule applies identity A to all IMAP services, while another rule applies identity B to all services in the example.com domain.  </li>
<li>One rule originates from enterprise management provisioning tools as described in <a href="#Identity_Addition_Automated">Section 6.3.3</a>, and another rule originates from manual addition.  </li>
<li>The user has associated an identity with a service upon encountering the service for the first time, and later creates a rule that matches all services within that service's realm.  </li>
</ul>

<p> </p>
<p id="rfc.section.7.1.3.p.2">Identity selectors MUST order the precedence of rules as follows: </p>

<ol>
<li>Manually provisioned rules matching specific services and realms </li>
<li>Enterprise provisioned rules matching specific services and realms </li>
<li>Manually provisioned rules matching any service in a single realm </li>
<li>Enterprise provisioned rules matching any service in a single realm </li>
<li>Manually provisioned rules matching a single service in any realm </li>
<li>Enterprise provisioned rules matching a single service in any realm </li>
</ol>

<p> Identity selectors SHOULD notify the user whenever a new rule will take precedence over an existing rule.  </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Disassociating a Service with an Identity</h1>
<p id="rfc.section.7.2.p.1">A user MUST be able to disassociate an identity with a service - that is, to be able to remove the mapping without having to remove the identity.  </p>
<p id="rfc.section.7.2.p.2">There should also be provision for the automated disassociation of an identity with a service for appropriate types of authentication failures.  </p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Listing Services and Identities</h1>
<p id="rfc.section.7.3.p.1">A service listing should be considered in the identity selector which is both searchable and editable by the user.  </p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> <a href="#Showing_Requesting_Service" id="Showing_Requesting_Service">Showing the Service that is requesting Authentication</a>
</h1>
<p id="rfc.section.7.4.p.1">When a user is attempting to authenticate to a service for the first time, there should be some indication given to the user as to which service is requesting authentication. In many cases, the service may be obvious (where the user has started the process of attempting to authenticate to a particular service), but in other cases this may not be obvious (e.g. if an authentication attempt is triggered by a timer or a specific event), and for this scenario some indication as to the requesting service is necessary.  </p>
<h1 id="rfc.section.7.5">
<a href="#rfc.section.7.5">7.5.</a> <a href="#Showing_Current_Identity" id="Showing_Current_Identity">Showing the Identity currently in use</a>
</h1>
<p id="rfc.section.7.5.p.1">It would be beneficial if, when using a service, the identity currently in use could be made visible to the user while they are using a specific service. This allows the user to identify which identity is used with a particular service at a particular time (the user may have more than one identity that they could use with a particular service) - so that they can then disassociate the pairing.  </p>
<p id="rfc.section.7.5.p.2">Implementing such a feature may be hard, however, due to the layered nature of the ABFAB transaction - the identity selector will certainly know when successful (or failed) authentications to a particular service have happened, but after that it typically plays no further part in the use of the service. Therefore, knowing that a particular service is still using a particular identity in order to indicate this to the user would be challenging.  </p>
<h1 id="rfc.section.7.6">
<a href="#rfc.section.7.6">7.6.</a> Multiple Identities for a Particular Service</h1>
<p id="rfc.section.7.6.p.1">An Identity Selector should be able to deal with the case where a user has multiple identities associated with a single service. For example, upon receiving a request for authentication to a service that multiple identities are configured for, ask the user which of the identities should be used in this instance.  </p>
<h1 id="rfc.section.7.7">
<a href="#rfc.section.7.7">7.7.</a> Not using ABFAB for a Particular Service</h1>
<p id="rfc.section.7.7.p.1">There may be cases where a user does not wish to use ABFAB based authentication at all to a particular service, even though it is ABFAB enabled. To support this, the identity selector would have to allow the user to choose not to use ABFAB when they attempt to authenticate to a service. It would be desirable if the user could also flag that this should be remembered.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Handling_Errors" id="Handling_Errors">Handling of Errors</a>
</h1>
<p id="rfc.section.8.p.1">Errors during the ABFAB authentication process can happen at any of the many layers - they could be GSS-API errors, EAP errors, RADIUS/RadSec errors, SAML errors, application errors, etc. ABFAB based technologies are limited in error handling by the limitations in the protocols used.  </p>
<p id="rfc.section.8.p.2">For example, all GSS-API calls are necessarily instantiated from within the calling application. For this reason, when an error occurs the error is passed back to the application in order for it to deal with it. To retry, the application needs to re-initiate the GSS-API call. Unless the application has been written to deal with this properly, this process can be very tedious for a user and cause them opt out of what they are trying to accomplish. In addition to this, the error messages themselves may not be useful enough for the user to decipher what has gone wrong.  </p>
<p id="rfc.section.8.p.3">Absent an improvement to the error handling of these protocols, implementors of an ABFAB Identity Selector will need to work around these limitations. Possible error conditions need to be considered, and decisions about what errors should be presented to the user, and how, need to be made.  </p>
<p id="rfc.section.8.p.4">To give an idea of the range of errors that might be seen, consider the following non-exhaustive set of potential errors.  </p>
<p id="rfc.section.8.p.5">Identity Association/Verification Errors: </p>

<ul>
<li>The credentials presented to the IdP were not able to be verified - e.g. wrong username/password.  </li>
<li>The Trust Anchor for the IdP was invalid.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.p.6">Service Errors: </p>

<ul><li>The Identity might have been successfully authenticated by the IdP, but the user might not have authorisation to use the service they are attempting to use.  </li></ul>

<p> </p>
<p id="rfc.section.8.p.7">Other Errors: </p>

<ul>
<li>The IdP didn't respond to the Service.  </li>
<li>The IdP didn't respond to the Client.  </li>
<li>Network errors.  </li>
<li>Timing errors.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Handling_Successes" id="Handling_Successes">Handling of Successes</a>
</h1>
<p id="rfc.section.9.p.1">It is of course hoped that the identity selector will have to occasionally handle successes as well as errors. This section has some brief discussion about some areas you might want to think about.  </p>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> Reporting Authentication Success on First Use of Identity</h1>
<p id="rfc.section.9.1.p.1">The first time an identity is used with a service, it would be good practice to visually indicate in some way that the process has been successful, in order that the user understands what is happening and is then prepared for future authentication attempts.  </p>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> Reporting Authentication Success</h1>
<p id="rfc.section.9.2.p.1">On an on-going basis you may or may not wish to indicate visually to the user a successful authentication to a service. This relates to <a href="#Showing_Current_Identity">Section 7.5</a>.  </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> Other Considerations</h1>
<p id="rfc.section.10.p.1">This section briefly discusses other considerations that you might want to think about that don't fit in any of the other categories.  </p>
<h1 id="rfc.section.10.1">
<a href="#rfc.section.10.1">10.1.</a> Identity Selector Taking Focus</h1>
<p id="rfc.section.10.1.p.1">When an ABFAB authentication request is triggered, and where it needs input from the user, the Identity Selector should take focus in some way so that it is clear to the user that they need to do something to proceed.  </p>
<h1 id="rfc.section.10.2">
<a href="#rfc.section.10.2">10.2.</a> Import/Export of Credentials</h1>
<p id="rfc.section.10.2.p.1">For various reasons, an identity selector implementation might want to include functionality that allows for the export/import of identities and service to identity mappings. This could be for backup purposes, to allow a degree of mobility between identity selector instances, etc.  </p>
<p id="rfc.section.10.2.p.2">If providing this functionality, it would be advisable that the credential store that is the result of the export should be secure - encrypted and password protected - given the nature of the information.  </p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> Security Considerations</h1>
<p id="rfc.section.11.p.1">Most security considerations are ones relevant to the use of GSS-EAP and are detailed in <a href="#I-D.ietf-abfab-arch">[I-D.ietf-abfab-arch]</a>. There are, however, a few specific sets of security considerations related to the UI implementation.  </p>
<p id="rfc.section.11.p.2">First, as discussed earlier, the Identity Selector should use a Trust Anchor to authenticate the IdP before it sends the users credentials to it. Having no Trust Anchor information at all, or an incorrect Trust Anchor, can enable the possibility of someone spoofing the IdP and harvesting credentials sent to it. So, how this Trust Anchor is configured and managed can have major security implications: </p>

<ul>
<li>The most secure way for a Trust Anchor to be configured is to have it provisioned alongside the other identity information in an enterprise provisioning scenario. This allows for the correct Trust Anchor to be configured with no user input required. However, thought needs to be given to Trust Anchor expiry and consequent requirement for regular reprovisioning of identity information.  </li>
<li>Another way that is potentially secure would be to allow the user to discover the Trust Anchor information out of band and manually input this information into the Identity Selector. This is only secure, however, for those users who understand what they're doing in this scenario; pragmatically, this is unlikely to be the case for many users so is not a recommended approach for the average user.  </li>
<li>A pragmatic approach would be leap of faith, whereby no Trust Anchor information is initially provisioned, and the first time the Identity Selector connects to the IdP it remembers the Trust Anchor information for future use. This doesn't mitigate against spoofing of an IdP in the first instance, but would enable mitigation against it for all future connections.  </li>
<li>Finally, there may be interesting ways to leverage technologies such as DANE <a href="#RFC6698">[RFC6698]</a> to store the Trust Anchor for an IdP in DNS.  </li>
</ul>

<p> </p>
<p id="rfc.section.11.p.3">Secondly, the storage of the user's credentials by the Identity Selector should be done in a secure manner to mitigate against people taking unauthorised control of the device being able to gather these credentials. Use of a secure credential storage mechanism, such as the GNOME Keyring on Linux, or Keychain on the Mac, are recommended.  </p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> IANA Considerations</h1>
<p id="rfc.section.12.p.1">This document does not require actions by IANA.  </p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> Contributors</h1>
<p id="rfc.section.13.p.1">The following individuals made important contributions to the text of this document: Sam Hartman (Painless Security LLC), and Maria Turk (Codethink Ltd).  </p>
<h1 id="rfc.section.14">
<a href="#rfc.section.14">14.</a> Acknowledgements</h1>
<p id="rfc.section.14.p.1">Thanks to Jim Schaad, Stefan Winter, David Chadwick, Kevin Wasserman, Mark Donally, and Dave Crocker, for feedback and suggestions.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">15.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4282">[RFC4282]</b></td>
<td class="top">
<a>Aboba, B.</a>, <a>Beadles, M.</a>, <a>Arkko, J.</a> and <a>P. Eronen</a>, "<a href="http://tools.ietf.org/html/rfc4282">The Network Access Identifier</a>", RFC 4282, DOI 10.17487/RFC4282, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5280">[RFC5280]</b></td>
<td class="top">
<a>Cooper, D.</a>, <a>Santesson, S.</a>, <a>Farrell, S.</a>, <a>Boeyen, S.</a>, <a>Housley, R.</a> and <a>W. Polk</a>, "<a href="http://tools.ietf.org/html/rfc5280">Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>", RFC 5280, DOI 10.17487/RFC5280, May 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6698">[RFC6698]</b></td>
<td class="top">
<a>Hoffman, P.</a> and <a>J. Schlyter</a>, "<a href="http://tools.ietf.org/html/rfc6698">The DNS-Based Authentication of Named Entities (DANE) Transport Layer Security (TLS) Protocol: TLSA</a>", RFC 6698, DOI 10.17487/RFC6698, August 2012.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-abfab-arch">[I-D.ietf-abfab-arch]</b></td>
<td class="top">
<a>Howlett, J</a>, <a>Hartman, S</a>, <a>Tschofenig, H</a>, <a>Lear, E</a> and <a>J Schaad</a>, "<a href="http://tools.ietf.org/html/draft-ietf-abfab-arch-12">Application Bridging for Federated Access Beyond Web (ABFAB) Architecture</a>", Internet-Draft draft-ietf-abfab-arch-12, February 2014.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-abfab-usecases">[I-D.ietf-abfab-usecases]</b></td>
<td class="top">
<a>Smith, R</a>, "<a href="http://tools.ietf.org/html/draft-ietf-abfab-usecases-05">Application Bridging for Federated Access Beyond web (ABFAB) Use Cases</a>", Internet-Draft draft-ietf-abfab-usecases-05, September 2012.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#appendix" id="appendix">Change Log</a>
</h1>
<p id="rfc.section.Appendix A.p.1">Note to RFC Editor: if this document does not obsolete an existing RFC, please remove this appendix before publication as an RFC.  </p>
<p id="rfc.section.Appendix A.p.2">IETF draft -01 to ietf draft -02 </p>

<ol>
<li>Tidying up language throughout.  </li>
<li>Finished remaining TODOs - largely in the error handling section.  </li>
<li>Added security considerations section.  </li>
</ol>

<p> </p>
<p id="rfc.section.Appendix A.p.3">IETF draft -00 to ietf draft -01 </p>

<ol>
<li>Tidying up language throughout </li>
<li>Doing some of the TODOs </li>
<li>Added language that tries to explain that this document is not a substitute for good HCI/UX design.  </li>
<li>Changed terminology slightly to avoid confusion between an identity selector "mechanism" and a GSS-API mechanism.  </li>
<li>Added a caveat about the potential for the UI to show the identity currently in use for a particular service.  </li>
<li>Added a requirement that the identity selector must not store the same NAI for multiple identities.  </li>
<li>Stopped talking about "provisioning" after saying that I wouldn't talk about "provisioning".  </li>
</ol>

<p> </p>
<p id="rfc.section.Appendix A.p.4">Draft -04 to ietf draft -00 </p>

<ol>
<li>Adding brief discussion of identities vs identifiers (Ken).  </li>
<li>Changing assumption about credentials having a password in favour of more generic text for other auth types.  </li>
<li>Adding discussion of storage of identity information.  </li>
<li>Added sections on dealing with multiple identities per service, remembering credentials, remembering not to use ABFAB.  </li>
<li>Added small section on ID selector needing to take focus in some way.  </li>
</ol>

<p> </p>
<p id="rfc.section.Appendix A.p.5">Draft -03 to draft -04 </p>

<ol><li>Addressing various comments from Jim and Stefan.  </li></ol>

<p> </p>
<p id="rfc.section.Appendix A.p.6">Draft -02 to draft -03 </p>

<ol><li>Bumping version to keep it alive.  </li></ol>

<p> </p>
<p id="rfc.section.Appendix A.p.7">Draft -01 to draft -02 </p>

<ol><li>Completed the major consideration sections, lots of rewording throughout.  </li></ol>

<p> </p>
<p id="rfc.section.Appendix A.p.8">Draft -00 to draft -01 </p>

<ol><li>None, republishing to refresh the document. Other than adding this comment...  </li></ol>

<p> </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Open Issues</h1>
<p id="rfc.section.Appendix B.p.1">Note to RFC Editor: please remove this appendix before publication as an RFC.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Dr. Rhys Smith</span> 
	  <span class="n hidden">
		<span class="family-name">Smith</span>
	  </span>
	</span>
	<span class="org vcardline">Cardiff University</span>
	<span class="adr">
	  <span>39-41 Park Place</span>

	  <span class="vcardline">
		<span class="locality">Cardiff</span>,  
		<span class="region"></span>
		<span class="code">CF10 3BB</span>
	  </span>
	  <span class="country-name vcardline">United Kingdom</span>
	</span>
	<span class="vcardline">Phone: +44 29 2087 0126</span>

<span class="vcardline">EMail: <a href="mailto:smith@cardiff.ac.uk">smith@cardiff.ac.uk</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mark Donnelly</span> 
	  <span class="n hidden">
		<span class="family-name">Donnelly</span>
	  </span>
	</span>
	<span class="org vcardline">Painless Security</span>
	<span class="adr">
	  <span>14 Summer Street</span>
<span>Suite 202</span>

	  <span class="vcardline">
		<span class="locality">Malden</span>,  
		<span class="region">Massachusetts</span> 
		<span class="code">02176</span>
	  </span>
	  <span class="country-name vcardline">United States</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mark@painless-security.com">mark@painless-security.com</a></span>

  </address>
</div>

</body>
</html>